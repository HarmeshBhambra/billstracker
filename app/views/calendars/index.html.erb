<div class="page-header">
  <h1>
    Summary
  </h1>
</div>

<form action="/">
  <!-- Hidden input for authenticity token to protect from forgery -->
  <input name="authenticity_token" type="hidden" value="<%= form_authenticity_token %>">
  <div class="form-group">
  <label for="month">Month</label>
  <select class="form-control" id="month" name="month">
    <option value="12">December</option>
    <option value="1">January</option>
    <option value="2">February</option>
    <option value="3">March</option>
    <option value="4">April</option>
  </select>
  </div>
  <button type="submit" class="btn btn-primary">Submit</button>
</form>

<%= search_form_for @q do |f| %>
  <p class="lead">Narrow results:</p>

  <div class="form-group">
    <%= f.label :due_at_cont, "Date containing" %>
    <%= f.text_field :due_at_cont, :class => "form-control", :placeholder => "Enter a few characters" %>
  </div>

  <%= f.submit :class => "btn btn-primary btn-block" %>

  <a href="/" class="btn btn-default btn-block">Clear filters</a>
<% end %>

<div class="row">
  <div class="col-md-12">
    <table class="table table-striped table-hover">
      <tr>
        <th>#</th>
        <th>Week 1</th>
        <th>Week 2</th>
        <th>Week 3</th>
        <th>Week 4</th>
        <th>Week 5</th>
      </tr>
      <% @bills.each do |bill| %>
      <tr>
        <td>
        <%= @n + 1 %>
        </td>
        <td>
          <% if @week_1_bills.include? bill %>
          <p>
            <h3>
              <%= bill.name %>
            </h3>
            <a>
              <%= bill.amount %>
            </a>
          </p>
          <% end %>
        </td>
        <td>
          <% if @week_2_bills.include? bill %>
          <p>
            <h3>
              <%= bill.name %>
            </h3>
            <a>
              <%= bill.amount %>
            </a>
          </p>
          <% end %>
        </td>
        <td>
          <% if @week_3_bills.include? bill %>
          <p>
            <h3>
              <%= bill.name %>
            </h3>
            <a>
              <%= bill.amount %>
            </a>
          </p>
          <% end %>
        </td>
        <td>
          <% if @week_4_bills.include? bill %>
          <p>
            <h3>
              <%= bill.name %>
            </h3>
            <a>
              <%= bill.amount %>
            </a>
          </p>
          <% end %>
        </td>
        <td>
          <% if @week_5_bills.include? bill %>
          <p>
            <h3>
              <%= bill.name %>
            </h3>
            <a>
              <%= bill.amount %>
            </a>
          </p>
          <% end %>
        </td>
      </tr>
      <% @n = @n + 1 %>
      <% end %>
      <tr>
        <td>
          Subtotal
        </td>
        <td>
          <div><%= @week_1_bills.map{|item| item.amount}.sum %></div>
        </td>
        <td>
          <div><%= @week_2_bills.map{|item| item.amount}.sum %></div>
        </td>
        <td>
          <div><%= @week_3_bills.map{|item| item.amount}.sum %></div>
        </td>
        <td>
          <div><%= @week_4_bills.map{|item| item.amount}.sum %></div>
        </td>
        <td>
          <div><%= @week_5_bills.map{|item| item.amount}.sum %></div>
        </td>
      </tr>
      <tr>
        <td>
          Total
        </td>
        <td colspan="5" class="total">
          <div><%= @bills.map{|item| item.amount}.sum %></div>
        </td>
      </tr>
    </table>

  </div>
</div>
